{"version":3,"sources":["./src/app/music/music-login/music-login.module.ts","./src/app/music/music-login/music-login-routing.module.ts","./src/app/music/music-login/music-login.page.scss","./src/app/music/music-login/music-login.page.html","./src/app/music/music-login/music-login.page.ts"],"names":[],"mappings":"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","file":"music-music-login-music-login-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { MusicLoginPageRoutingModule } from './music-login-routing.module';\r\n\r\nimport { MusicLoginPage } from './music-login.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    MusicLoginPageRoutingModule\r\n  ],\r\n  declarations: [MusicLoginPage]\r\n})\r\nexport class MusicLoginPageModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { MusicLoginPage } from './music-login.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: MusicLoginPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class MusicLoginPageRoutingModule {}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJtdXNpYy1sb2dpbi5wYWdlLnNjc3MifQ== */\";","export default \"  \\r\\n\\r\\n\\r\\n<ion-content class=\\\"centro\\\">\\r\\n<div class=\\\"fondologin\\\"></div>\\r\\n   \\r\\n  \\r\\n<div class=\\\"center\\\"><ion-icon name=\\\"planet\\\" color=\\\"light\\\" class=\\\"imagenintro\\\"></ion-icon></div>\\r\\n  \\r\\n<div class=\\\"card\\\">\\r\\n<ion-card class=\\\"card2\\\" color=\\\"\\\">\\r\\n<ion-card-content>\\r\\n<br>\\r\\n  \\r\\n<h1 class=\\\"ion-text-center\\\"> ¡Hola! </h1>\\r\\n<div color=\\\"light\\\">\\r\\n<form> \\r\\n<ion-item lines=\\\"full\\\">\\r\\n<ion-label position=\\\"floating\\\" >Email</ion-label>\\r\\n<ion-input type=\\\"email\\\" #email required=\\\"true\\\" maxlength=\\\"40\\\" autocomplete></ion-input>\\r\\n</ion-item>\\r\\n<ion-item lines=\\\"full\\\">\\r\\n<ion-label position=\\\"floating\\\">Contraseña</ion-label>\\r\\n<ion-input type=\\\"password\\\" #password required=\\\"true\\\" maxlength=\\\"10\\\" minlength=\\\"6\\\"></ion-input>\\r\\n</ion-item>\\r\\n<br>\\r\\n<br>\\r\\n\\r\\n\\r\\n<ion-row >\\r\\n<ion-col>\\r\\n<ion-button\\r\\nclass=\\\"center\\\"\\r\\n type=\\\"submit\\\"\\r\\n(click)=\\\"onLogin(email, password)\\\" \\r\\nshape=\\\"round\\\"\\r\\ncolor=\\\"light\\\"\\r\\nmode=\\\"ios\\\">Login</ion-button>\\r\\n</ion-col>\\r\\n</ion-row> \\r\\n<br>\\r\\n</form>\\r\\n</div>\\r\\n</ion-card-content>\\r\\n</ion-card>\\r\\n</div>\\r\\n          \\r\\n  \\r\\n<ion-row>\\r\\n<ion-col>\\r\\n<p class=\\\"ion-text-center\\\">\\r\\n<a routerLink=\\\"/music-forgot-password\\\" color=\\\"dark\\\" class=\\\"nopuedesentrar\\\"> ¿No puedes entrar? </a>\\r\\n</p>\\r\\n</ion-col>\\r\\n</ion-row>\\r\\n  \\r\\n\\r\\n<div  *ngIf=\\\"user$  | async as user; else noregister \\\"></div>\\r\\n\\r\\n<ng-template #noregister>\\r\\n<ion-row>\\r\\n<ion-col>\\r\\n<ion-button\\r\\nclass=\\\"ion-text-center\\\" \\r\\nrouterLink=\\\"/music-register\\\"\\r\\n shape=\\\"round\\\"\\r\\nexpand=\\\"block\\\"\\r\\ncolor=\\\"light\\\"\\r\\nmode=\\\"ios\\\">¡Regístrate!</ion-button>\\r\\n </ion-col>\\r\\n</ion-row>\\r\\n</ng-template>\\r\\n\\r\\n\\r\\n\\r\\n  </ion-content>\\r\\n\";","import { AuthService } from '../../services/auth.service';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { ToastController } from '@ionic/angular';\r\nimport { User } from '../../shared/user.interface';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\n\r\n@Component({\r\n  selector: 'app-music-login',\r\n  templateUrl: './music-login.page.html',\r\n  styleUrls: ['./music-login.page.scss'],\r\n})\r\nexport class MusicLoginPage implements OnInit {\r\n\r\n  userId: string;\r\n  public user$: Observable<User> = this.authSvc.afAuth.user;\r\n\r\n  constructor(  public afAuth: AngularFireAuth, \r\n    private authSvc: AuthService, \r\n    private router: Router,\r\n    public toastController: ToastController)\r\n     {\r\n      this.afAuth.authState.subscribe(user => {\r\n        if (user) {\r\n           this.userId = user.uid;\r\n        }\r\n      })\r\n     }\r\n\r\n     async toastdatosincompatibles() {\r\n      const toast = await this.toastController.create({\r\n        message: 'Algunos datos suministrados son incorrectos.',\r\n        duration: 2000,\r\n        cssClass: 'eltoast',\r\n        color:'light',\r\n        buttons: [\r\n          {\r\n          side: 'start',\r\n          icon: 'lock-closed',\r\n          }\r\n          ]\r\n       });\r\n      toast.present();\r\n  \r\n      }\r\n\r\n  async onLogin(email, password) {/* \r\n    localStorage.setItem('showSpinner', 'true'); */ \r\n    try {\r\n      \r\n      const user = await this.authSvc.login(email.value, password.value);\r\n      if (user) {\r\n     /*    this.showSpinner = true;\r\n        localStorage.setItem('showSpinner', 'true'); */\r\n        const isVerified = this.authSvc.isEmailVerified(user);\r\n        this.redirectUser(isVerified);\r\n      \r\n      }\r\n    } catch (error) {\r\n      this.toastdatosincompatibles();\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n  private redirectUser(isVerified: boolean): void {\r\n    if (isVerified) {\r\n      this.router.navigate(['/folder/Inicio']);\r\n\r\n    } else {\r\n      this.router.navigate(['music-verifyemail']);\r\n    }\r\n  }\r\n\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}